<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Datatables</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- DataTables CSS -->
    <link rel="stylesheet" href="//cdn.datatables.net/2.1.5/css/dataTables.dataTables.min.css">
    
    <style>
        /* Custom styling for DataTables */
        .dataTables_wrapper .dataTables_paginate {
            float: none;
            text-align: center;
        }
        .dataTables_wrapper .dataTables_length,
        .dataTables_wrapper .dataTables_info {
            float: left;
        }
        #column-toggles {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">DataTables</h1>

        <!-- Tabs to display the table twice -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="table1-tab" data-bs-toggle="tab" data-bs-target="#table1" type="button" role="tab" aria-controls="table1" aria-selected="true">Table 1</button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="table2-tab" data-bs-toggle="tab" data-bs-target="#table2" type="button" role="tab" aria-controls="table2" aria-selected="false">Table 2</button>
            </li>
        </ul>

        <div class="tab-content" id="myTabContent">
            <!-- Tab 1 Content -->
            <div class="tab-pane fade show active" id="table1" role="tabpanel" aria-labelledby="table1-tab">
                <!-- Column Toggle Buttons -->
                <div id="column-toggles">
                    <button class="btn btn-primary btn-sm" onclick="toggleColumn(0)">Toggle Name</button>
                    <button class="btn btn-primary btn-sm" onclick="toggleColumn(1)">Toggle Position</button>
                    <button class="btn btn-primary btn-sm" onclick="toggleColumn(2)">Toggle Office</button>
                    <!-- Add more toggle buttons as needed -->
                </div>

                <!-- DataTable 1 -->
                <table id="myTable1" class="table table-striped" style="width:100%">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Age</th>
                            <th>Start date</th>
                            <th>Salary</th>
                            <th>Department</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th><input type="text" placeholder="Search Name"></th>
                            <th><input type="text" placeholder="Search Position"></th>
                            <th><input type="text" placeholder="Search Office"></th>
                            <th><input type="text" placeholder="Search Age"></th>
                            <th><input type="text" placeholder="Search Start Date"></th>
                            <th><input type="text" placeholder="Search Salary"></th>
                            <th><input type="text" placeholder="Search Department"></th>
                        </tr>
                    </tfoot>
                    <tbody>
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>System Architect</td>
                            <td>Edinburgh</td>
                            <td>61</td>
                            <td>2011/04/25</td>
                            <td>$320,800</td>
                            <td>Engineering</td>
                        </tr>
                        <tr>
                            <td>Garrett Winters</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>63</td>
                            <td>2011/07/25</td>
                            <td>$170,750</td>
                            <td>Finance</td>
                        </tr>
                        <!-- Add more rows as needed -->
                    </tbody>
                </table>
                <button class="btn btn-danger" onclick="deleteSelectedRow('#myTable1')">Delete Selected Row</button>
            </div>

            <!-- Tab 2 Content -->
            <div class="tab-pane fade" id="table2" role="tabpanel" aria-labelledby="table2-tab">
                <!-- DataTable 2 (identical table as Tab 1) -->
                <table id="myTable2" class="table table-striped" style="width:100%">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Position</th>
                            <th>Office</th>
                            <th>Age</th>
                            <th>Start date</th>
                            <th>Salary</th>
                            <th>Department</th>
                        </tr>
                    </thead>
                    <tfoot>
                        <tr>
                            <th><input type="text" placeholder="Search Name"></th>
                            <th><input type="text" placeholder="Search Position"></th>
                            <th><input type="text" placeholder="Search Office"></th>
                            <th><input type="text" placeholder="Search Age"></th>
                            <th><input type="text" placeholder="Search Start Date"></th>
                            <th><input type="text" placeholder="Search Salary"></th>
                            <th><input type="text" placeholder="Search Department"></th>
                        </tr>
                    </tfoot>
                    <tbody>
                        <tr>
                            <td>Tiger Nixon</td>
                            <td>System Architect</td>
                            <td>Edinburgh</td>
                            <td>61</td>
                            <td>2011/04/25</td>
                            <td>$320,800</td>
                            <td>Engineering</td>
                        </tr>
                        <tr>
                            <td>Garrett Winters</td>
                            <td>Accountant</td>
                            <td>Tokyo</td>
                            <td>63</td>
                            <td>2011/07/25</td>
                            <td>$170,750</td>
                            <td>Finance</td>
                        </tr>
                        <!-- Add more rows as needed -->
                    </tbody>
                </table>
                <button class="btn btn-danger" onclick="deleteSelectedRow('#myTable2')">Delete Selected Row</button>
            </div>
        </div>
    </div>

    <!-- Bootstrap 5 JS & dependencies (Popper.js, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- jQuery (necessary for DataTables) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- DataTables JS -->
    <script src="//cdn.datatables.net/2.1.5/js/dataTables.min.js"></script>

    <script>
        // Initialize DataTables for both tables
        let table1 = new DataTable('#myTable1', {
            dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'p>>" +
                 "<'row'<'col-sm-12'tr>>" +
                 "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
            pagingType: "simple_numbers"
        });
        
        let table2 = new DataTable('#myTable2', {
            dom: "<'row'<'col-sm-12 col-md-6'l><'col-sm-12 col-md-6'p>>" +
                 "<'row'<'col-sm-12'tr>>" +
                 "<'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",
            pagingType: "simple_numbers"
        });

        // Individual column searching
        $('#myTable1 tfoot input').on('keyup change', function () {
            let colIndex = $(this).parent().index();
            table1.columns(colIndex).search(this.value).draw();
        });

        $('#myTable2 tfoot input').on('keyup change', function () {
            let colIndex = $(this).parent().index();
            table2.columns(colIndex).search(this.value).draw();
        });

        // Function to toggle column visibility
        function toggleColumn(colIndex) {
            let column = table1.column(colIndex);
            column.visible(!column.visible());
        }

        // Function to delete the selected row
        function deleteSelectedRow(tableId) {
            let table = $(tableId).DataTable();
            $(tableId + ' tbody tr.selected').remove().draw();
        }

        // Add row selection
        $('#myTable1 tbody').on('click', 'tr', function () {
            $(this).toggleClass('selected');
        });

        $('#myTable2 tbody').on('click', 'tr', function () {
            $(this).toggleClass('selected');
        });
    </script>
</body>
</html>
